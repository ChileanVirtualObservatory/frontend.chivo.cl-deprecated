/* 
 * This file is part of ChiVO, the Chilean Virtual Observatory
 * A project sponsored by FONDEF (D11I1060)
 * Copyright (C) 2015 
 *      Universidad Tecnica Federico Santa Maria Mauricio Solar
 *                                               Marcelo Mendoza
 *      Universidad de Chile                     Diego Mardones
 *      Pontificia Universidad Catolica          Karim Pichara
 *      Universidad de Concepcion                Ricardo Contreras
 *      Universidad de Santiago                  Victor Parada
 *
 * This program is free software; you can redistribute it and/or modify 
 * it under the terms of the GNU General Public License as published by 
 * the Free Software Foundation; either version 2 of the License, or 
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 
 * 02110-1301, USA or visit <http://www.gnu.org/licenses/>.
*/


$ra_dec = $("#ra_dec"); /* input id ra_dec */
$container_input = $("#source_name_sesame").closest(".container-input"); /* container input of source name sesame */
$button = $container_input.find("#sesame_search"); /* button for resolve sesame */
$icon = $button.find("i");

$actions_state = $("#actions_states");

<% if @ra_dec == "ERROR" %> /* if the resolve has error make visible*/
	$actions_state.removeClass(" alert-warning alert-success alert-danger alert-info");
	$actions_state.addClass("alert-danger");
	$actions_state.text(" ");
	$actions_state.append("<strong></strong>");
	$actions_state.find("strong").text("Oh snap!");
	$actions_state.append(" something is wrong with the ra and dec cordinates");
	
	$ra_dec.val("");
	
<% else %>
	
	$ra_dec.val("<%= @ra_dec %>"); /* put ra and dec resolved into input w/ id=ra_dec */
	$ra_dec.closest(".container-input").slideDown("slow"); /* just for see that */

	$actions_state.removeClass(" alert-warning alert-success alert-danger alert-info");
	$actions_state.addClass("alert-success");
	$actions_state.text(" ");
	$actions_state.append("<strong></strong>");
	$actions_state.find("strong").text("Well done!");
	$actions_state.append(" the sesame source name has been resolved");
	
<% end %>

$icon.removeClass("fa fa-spinner fa-spin")
	.addClass("fa fa-angle-right fa-lg"); /* clean the icon */
$container_input.find("#source_name_sesame").css('width', "149px");
