// This file is part of ChiVO, the Chilean Virtual Observatory
// Copyright (C) 2015 Jonathan Antognini Cavieres <jonathan.antognini@gmail.com>
//                    Cesar Parra Moreno <cparra@csrg.cl>
//                    Constanza Soto <constanza.soto.12@sansano.usm.cl>
//                    Jose Miguel Castro <jcastro@csrg.cl>
//                    Marco Salinas <marco.salinas.12@sansano.usm.cl>
//                    Felipe Morales <felipe.moralesm.12@sansano.usm.cl>
//                    Luis E. Arevalo R. <arevalo@luchox.cl>
// 
// This program is free software; you can redistribute it and/or modify 
// it under the terms of the GNU General Public License as published by 
// the Free Software Foundation; either version 2 of the License, or 
// (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
// 
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 
// 02110-1301, USA or visit <http://www.gnu.org/licenses/>.


$table_query = $(".panel-body");
$groups = $table_query.find(".form-group");
$ra = $groups.find("#ra");
$dec=$groups.find("#dec");
$container_input = $("#source_name_sesame").closest(".col-sm-5"); /* container input of source name sesame */
$button = $groups.find("#sesame_search");
$icon = $button.find("i");
$actions_state = $("#actions_states");

<% if @ra == "ERROR"||@dec =="ERROR" %> /* if the resolve has error make visible*/
	$actions_state.removeClass(" alert-warning alert-success alert-danger alert-info");
	$actions_state.addClass("alert-danger");
	$actions_state.text(" ");
	$actions_state.append("<strong></strong>");
	$actions_state.find("strong").text("Oh snap!");
	$actions_state.append(" something is wrong with the ra and dec cordinates");
	
	$ra.val("");
	$dec.val("");
<% else %>
	$ra.val("<%= @ra %>"); /* put ra and dec resolved into input w/ id=ra_dec */
	$ra.closest(".container-input").slideDown("slow"); /* just for see that */
	$dec.val("<%= @dec %>"); /* put ra and dec resolved into input w/ id=ra_dec */
	$dec.closest(".container-input").slideDown("slow"); /* just for see that */
	$actions_state.removeClass(" alert-warning alert-success alert-danger alert-info");
	$actions_state.addClass("alert-success");
	$actions_state.text(" ");
	$actions_state.append("<strong></strong>");
	$actions_state.find("strong").text("Well done!");
	$actions_state.append(" The sesame source name has been resolved");
	
<% end %>

$icon.removeClass("fa fa-spinner fa-spin").addClass("fa fa-angle-right fa-lg"); /* clean the icon */
