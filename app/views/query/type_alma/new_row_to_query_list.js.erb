$queryListTable = $("#query_list_table");
$ra_dec = $("#ra_dec");
$source_name_sesame = $("#source_name_sesame");
$search_radius = $("#search_radius");
tr_amount = $queryListTable.find("tr").size();
id = 0;
if (tr_amount == 1){
	id = tr_amount;
}
else {
	id = parseInt($queryListTable.find("tr").last().attr('id')) + 1;	
}
$newTR = $("<tr id="+id+">" +
			"<td class='sesame_td'>"+$source_name_sesame.val()+"<input name='source_name_sesame_"+id+ "' type='text' class='form-control' value='"+$source_name_sesame.val()+"'style='display:none;'/></td>" +
			"<td class='ra_dec_td'>"+$ra_dec.val()+"<input name='ra_dec_"+id+"' type='text' class='form-control' value='"+$ra_dec.val()+"'style='display:none;'/></td>" +
			"<td class='search_td'>"+$search_radius.val()+"<input name='search_radius_"+id+"' type='text' class='form-control' value='"+$search_radius.val()+"' style='display:none;'/></td>" +
			"<td class='resource_td'></td>" + 
			"<td class='action_td'></td>" +					
		"</tr>");

var multi_select = $('<select/>',{
		id: 'multi_select_resource'+id,
		multiple: 'multiple',
		style: 'float:center',
		name: 'resource_'+id+'[]'
	});

var delete_button = $('<a/>',
    {
        class: 'btn btn-danger btn-xs',
        style: 'height:20px',
        text: '',
        click: function () {
        	$(this).closest("tr").remove();
         }
    });

var trash_icon = $('<i/>',{class: 'fa fa-trash-o fa-fw '});
delete_button.prepend(trash_icon);

$newTR.find("td").last().append(delete_button)
	.prev().append(multi_select);


var data = [
	{label: "J/ApJ/473/822", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/ApJ/473/822&"},
    {label: "XMM/CFRSID", value: "http://heasarc.gsfc.nasa.gov/cgi-bin/vo/cone/coneGet.pl?table=xmmcfrsoid&"},
    {label: "J/AJ/136/2050", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/AJ/136/2050&"},
    {label: "J/AJ/124/601", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/AJ/124/601&"},
    {label: "J/A+A/504/347", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/A+A/504/347&"},
    {label: "J/ApJS/183/214", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/ApJS/183/214&"},
    {label: "J/AJ/127/2771", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/AJ/127/2771&"},
    {label: "J/ApJ/732/101", value: "http://vizier.u-strasbg.fr/viz-bin/votable/-A?-source=J/ApJ/732/101&"},
];

multi_select.multiselect({
	buttonWidth: '400px',
	buttonClass: 'btn btn-default btn-sm',
	includeSelectAllOption: true,
	enableFiltering: true,
	maxHeight: 150,
	checkboxName: '',
	selectedClass: null
	});

multi_select.multiselect('dataprovider', data);

$queryListTable.find("tbody").append($newTR);
//update_action_state("alert-success", "Well done!", "cordinates added to the query list");

$ra_dec.val("").closest(".container-input").slideUp();
$source_name_sesame.val("").closest(".container-input").slideUp();